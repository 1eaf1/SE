# Тема 7. Работа с файлами (ввод, вывод)
Отчет по Теме #7 выполнил(а):
- Фалалеев Евгений Алексевич
- АИС-22-1

| Задание | Лаб_раб | Сам_раб |
| ------ | ------ | ------ |
| Задание 1 | + | + |
| Задание 2 | + | + |
| Задание 3 | + | + |
| Задание 4 | + | + |
| Задание 5 | + | + |
| Задание 6 | + |  |
| Задание 7 | + |  |
| Задание 8 | + |  |
| Задание 9 | + |  |
| Задание 10 | + |  |

знак "+" - задание выполнено; знак "-" - задание не выполнено;

Работу проверили:
- к.э.н., доцент Панов М.А.

## Лабораторная работа №1
### Составьте текстовый файл и положите его в одну директорию с программой на Python. Текстовый файл должен состоять минимум из двух строк.

#### text.txt:
```
Hello World!
World is beautiful!
```
### Результат.
![Лаб1](https://github.com/1eaf1/SE/blob/Тема_7/pic/Лаб1.png)

## Выводы
Был создан файл, состоящий из двух строк в одной директории рядом с файлом.

## Лабораторная работа №2
### Напишите программу, которая выведет только первую строку из вашего файла, при этом используйте конструкцию open()/close().

```python
file = open("text.txt",'r')
print(file.readline())
file.close()
```
### Результат
![Лаб2](https://github.com/1eaf1/SE/blob/Тема_7/pic/Лаб2.png)

## Выводы
В данном коде сначала открывается файл для работы с ним при помощи функции open(), которая содержит в себе параметры: имени файла и действия с файлом. Благодаря параметру 'r' и методу readline() осуществляется чтение первой строчки файла. Далее файл закрывается при помощи метода close() для освобождения ресурса памяти компьютера.

## Лабораторная работа №3
### Напишите программу, которая выведет все строки из вашего файла в массиве, при этом используйте конструкцию open()/close().

```python
file = open("text.txt",'r')
print(file.readlines())
file.close()
```

### Результат
![Лаб3](https://github.com/1eaf1/SE/blob/Тема_7/pic/Лаб3.png)

## Выводы
В результате работы данного кода осуществляется вывод списка со строками, созданного методом readlines().
  
## Лабораторная работа №4
### Напишите программу, которая выведет все строки из вашего файла в массиве, при этом используйте конструкцию with open()

```python
with open("text.txt","r") as file:
    print(file.readlines())
```

### Результат
![Лаб4](https://github.com/1eaf1/SE/blob/Тема_7/pic/Лаб4.png)

## Выводы
В данном коде осуществляется вывод списка со строками, созданного методом readlines(), однако в данном случае закрытие файла происходит автоматически при помощи из-за использования конструкции with.

## Лабораторная работа №5
### Напишите программу, которая выведет каждую строку из вашего файла отдельно, при этом используйте конструкцию with open().

```python
with open("text.txt","r") as file:
    lines = file.readlines()
    for line in lines:
        print(line)
```

### Результат
![Лаб5](https://github.com/1eaf1/SE/blob/Тема_7/pic/Лаб5.png)

## Выводы
В данном коде список строк присваивается переменной lines, у которой затем каждое значение line выводится в цикле for, т.е. каждый элемент lines представляет собой отдельную строчку. Закрытие файла происходит автоматически при помощи конструкции with.

## Лабораторная работа №6
### Напишите программу, которая будет добавлять новую строку в ваш файл, а потом выведет полученный файл в консоль. Вывод можно осуществлять любым способом. Обязательно проверьте сам файл, чтобы изменения в нем тоже отображались.

```python
with open("text.txt","a") as file:
    file.write("\nI really enjoy it! ")

with open("text.txt", "r") as file:
    for line in file:
        print(line)
```

### Результат
![Лаб6](https://github.com/1eaf1/SE/blob/Тема_7/pic/Лаб6.png)
![Лаб6_1](https://github.com/1eaf1/SE/blob/Тема_7/pic/Лаб6_1.png)

## Выводы
В результате работы данного кода в первой конструкции with осуществляется добавление нового сообщения/строки в файл. Во второй конструкции with осуществляется вывод всех строк из файла на экран консоли.

## Лабораторная работа №7
### Напишите программу, которая перепишет всю информацию, которая была у вас в файле до этого, например напишет любые данные из произвольно вами составленного списка. Также не забудьте проверить что измененная вами информация сохранилась в файле.

```python
list_fruits = ['My favourite fruits are:', 'Oranges','Apples','Plums','Bananas']

with open("text.txt","w") as file:
    for line in list_fruits:
        file.write(line + '\n')

with open("text.txt","r") as file:
    for line in file:
        print(line.strip())
```

### Результат
![Лаб7](https://github.com/1eaf1/SE/blob/Тема_7/pic/Лаб7.png)

#### До:
![Лаб6_1](https://github.com/1eaf1/SE/blob/Тема_7/pic/Лаб6_1.png)
#### После:
![Лаб7_1](https://github.com/1eaf1/SE/blob/Тема_7/pic/Лаб7_1.png)

## Выводы
Результатом работы данного кода является полное перезаписывание всей старой информации внутри файла на новую, указанную в списке list_fruits. Осуществляется запись при помощи метода write() и параметра 'w' в функции open.


## Лабораторная работа №8
### Выберите любую папку на своем компьютере, имеющую вложенные директории. Выведите на печать в терминал ее содержимое, как и всех подкаталогов при помощи функции print_docs(directory).

```python
import os

def print_docs(directory):
    all_files = os.walk(directory)
    for catalog in all_files:
        print(f"Папка {catalog[0]} содержит:")
        print(f"Директории: {", ".join([folder for folder in catalog[1]])}")
        print(f"Файлы: {", ".join([file for file in catalog[2]])}")
        print("-"*40)

print_docs("C:Users\Евгений Фалалеев\Documents\УЧёба\Программная инженерия")
```
### Результат
![Лаб8](https://github.com/1eaf1/SE/blob/Тема_7/pic/Лаб8.png)
![Лаб8_1](https://github.com/1eaf1/SE/blob/Тема_7/pic/Лаб8_1.png)

## Выводы
В данном коде создаётся функция print_docs(), которая в качестве аргумента принимает указанный пользователем путь к папке. При помощи метода walk() модуля os осуществляется переход в нужную папку, обход всех дервьев и каталогов, и присвоение переменной all_files всех директорий и файлов. В цикле for для каждого элемента в списке all_files осуществляется вывод названия папки - catalog[0], в которой осуществляется поиск, вывод всех директорий в данной папке - catalog[1], вывод всех файлов в данной папке - catalog[2]. Цикл for проходит каждый catalog, каждую папку и выводит все директории внутри каждой папки и их файлы.

## Лабораторная работа №9
### Документ «input.txt» содержит следующий текст: Приветствие Спасибо Извините Пожалуйста До свидания Ты готов? Как дела? С днем рождения! Удача! Я тебя люблю. Требуется реализовать функцию, которая выводит слово, имеющее максимальную длину (или список слов, если таковых несколько). Проверьте работоспособность программы на своем наборе данных

```python
def longest_word(file):
    with open(file,encoding='utf-8') as file:
        words = file.read().split('\n')
        max_word = max(words, key=len)
        max_words_list = []
        for word in words:
            if len(word)==len(max_word):
                max_words_list.append(word)
        for word in max_words_list:
            print(word)
    return max_words_list

longest_word('text.txt')
```

### Результат
![Лаб9](https://github.com/1eaf1/SE/blob/Тема_7/pic/Лаб9.png)

## Выводы 
В данном коде создаётся функция, находящая самое длинное слово в файле, в качестве аргумента ей передаётся файл. Переменной words присваиваются все слова из файла, разделённые по переносу строки. max_word - переменная, которая находит максимальное по длине слово среди всех слов списка words. Далее создаётся max_words_list - список максимальных по длине слов, на случай, если несколько слов будут одинаковыми по длине. Далее в цикле for для каждого слова в списке words осуществляется проверка длины кадого слова с максимальным по длине словом. Если длины совпадают, то проверяемое слово добавляется в список максимальных по длине слов. Далее все слова из данного списка максимальных слов выводятся на экран консоли. 

## Лабораторная работа №10
### Требуется создать csv-файл «rows_300.csv» со следующими столбцами: • № - номер по порядку (от 1 до 300); • Секунда – текущая секунда на вашем ПК; • Микросекунда – текущая миллисекунда на часах. Для наглядности на каждой итерации цикла искусственно приостанавливайте скрипт на 0,01 секунды.

```python
import csv
import datetime
import time

with open('rows_300.csv','w',encoding='utf-8',newline='') as file:
    writer = csv.writer(file)
    writer.writerow(['№','Секунда ','Микросекунда '])
    for line in range(1,301):
        writer.writerow([line,datetime.datetime.now().second,datetime.datetime.now().microsecond])
        time.sleep(0.01)
```

### Результат
![Лаб10](https://github.com/1eaf1/SE/blob/Тема_7/pic/Лаб10.png)

## Выводы
В данном коде осуществляется запись данных в csv-файл при помощи модуля csv и переменной writer, которой присваивается метод writer() модуля csv. Далее осуществляется запись заголовков столбцов при помощи writerow() и в цикле for заносятся значения строки, секунд и микросекунд по столбцам. time.sleep используется для задержки выполнения программы.

## Самостоятельная работа №1
### Найдите в интернете любую статью (объем статьи не менее 200 слов), скопируйте ее содержимое в файл и напишите программу, которая считает количество слов в текстовом файле и определит самое часто встречающееся слово. Результатом выполнения задачи будет: скриншот файла со статьей, листинг кода, и вывод в консоль, в котором будет указана вся необходимая информация.

```python
def essay(file):
    with open(file,'r', encoding='utf-8') as f:
        text = f.read()
        text = text.lower()
        text = text.replace(',', '')
        text = text.replace('.','')
        text = text.replace('!','')
        text = text.replace('?','')
        text = text.replace('"','')
        text = text.replace(";", '')
        text = text.replace(":", '')
        list_of_words = []

        print("Количество слов в статье: ", len(text.split()))

        for word in text.lower().split():
            if len(word)>=3:
                if word not in list_of_words:
                    list_of_words.append(word)
        print(list_of_words)

        dictionary = {}
        max_value = ''
        for word in list_of_words:
            dictionary[word]=text.count(word)
        dictionary= dict(sorted(dictionary.items(),key = lambda item:item[0]))
        print(dictionary)
        max_key = max(dictionary,key=dictionary.get)
        max_value=dictionary[max_key]
        print(f"Максимально встречающееся слово: {max_key} (количество: {max_value})")

essay('essay.txt')
```

### Результат
![Сам1](https://github.com/1eaf1/SE/blob/Тема_7/pic/изображение_2024-10-17_005735937.png)

## Выводы
В данном коде создаётся функция, подсчитывающая наиболее часто встречаемое в тексте слово. В ней осуществляется перевод текста в нижний регистр и удаление знаков препинания. Далее в ней подсчитывается количество слов в статье, разделённых по пробелу. Далее подсчитываются слова, разделённые по пробелу, длина которых больше, либо равна трём. Если слова нет в списке уникальных слов, то оно добавляется туда. Далее создаётся словарь в который по ключу уникального слова добавляется значение подсчёта данного слова в тексте. Этот список сортируется и затем выводится на экран. Далее выводится максимальное значение наиболее часто встречающегося слова в словаре.

## Самостоятельная работа №2
### У вас появилась потребность в ведении книги расходов, посмотрев все существующие варианты вы пришли к выводу что вас ничего не устраивает и нужно все делать самому. Напишите программу для учета расходов. Программа должна позволять вводить информацию о расходах, сохранять ее в файл и выводить существующие данные в консоль. Ввод информации происходит через консоль. Результатом выполнения задачи будет: скриншот файла с учетом расходов, листинг кода, и вывод в консоль, с демонстрацией работоспособности программы.

```python
import csv

with open('book.csv','w',encoding='utf-8',newline='') as book:
    writer = csv.writer(book)
    writer.writerow(['Регистрация','','Сумма'])
    writer.writerow(['№ П/П', "Дата и номер первичного документа", "Доходы, учитываемые при исчислении налоговой базы","Расходы, учитываемые при исчислении налоговой базы"])

while True:
    action = int(input('Выберите действие - 0 завершить программу, 1 - добавить строку в книгу расходов, 2 - вывести данные книги: '))
    if(action==1):
        with open('book.csv','a',encoding='utf-8',newline='') as book:
            writer = csv.writer(book)
            writer.writerow(input().split(','))
    elif action==2:
        with open('book.csv','r',encoding='utf-8',newline='') as book:
            reader = csv.reader(book,delimiter=',')
            for row in reader:
                print(row)
    else: break
```

### Результат
![Сам2_1](https://github.com/1eaf1/SE/blob/Тема_7/pic/Сам2_1.png)
![Сам2_2](https://github.com/1eaf1/SE/blob/Тема_7/pic/Сам2_2.png)


## Выводы
В данном коде осуществляется импорт модуля csv для дальнейшей работы с csv-файлом. Сначала осуществляется запись основных столбцов книги расходов. Осуществляется это при помощи метода writerow(). Далее осуществляется реализация выбора действия, где 1 - означает добавление новой строки с данными в файл, 2 - вывод данных книги при помощи reader(), а любое другое число - завершение программы. Разделение элементов по столбцам при вводе осуществляется при помощи запятой.
  
## Самостоятельная работа №3
### Имеется файл input.txt с текстом на латинице. Напишите программу, которая выводит следующую статистику по тексту: количество букв латинского алфавита; число слов; число строк. • Текст в файле: Beautiful is better than ugly. Explicit is better than implicit. Simple is better than complex. Complex is better than complicated. • Ожидаемый результат: Input file contains: 108 letters 20 words 4 lines.

```python
def decomposition(file):
    with open(file,'r') as f:
        text=f.read()
        counter_of_letters = 0
        counter_of_words = 0
        for letter in text:
            if letter.isalpha():
                counter_of_letters +=1
        print("Количество букв:", counter_of_letters)
        for word in text.split():
            counter_of_words+=1
        print("Количество слов:", counter_of_words)
    with open(file, 'r') as f:
        lines = f.readlines()
        print("Количество строк:",len(lines))

if __name__=="__main__":
    decomposition('input.txt')
```
input.txt:
```
Beautiful is better than ugly.
Explicit is better than implicit.
Simple is better than complex.
Complex is better than complicated.
```

### Результат
![Сам3](https://github.com/1eaf1/SE/blob/Тема_7/pic/Сам3.png)

## Выводы
В данном коде в первом блоке with открывается файл для чтения всего текста в виде одной строки, где подсчитывается количество букв и количество слов в тексте + вывод результатов подсчёта на экран консоли. Во втором блоке with осуществляется чтение текста по строкам и вывод количества строк на экран консоли. 
  
## Самостоятельная работа №4
### Напишите программу, которая получает на вход предложение, выводит его в терминал, заменяя все запрещенные слова звездочками * (количество звездочек равно количеству букв в слове). Запрещенные слова, разделенные символом пробела, хранятся в текстовом файле input.txt. Все слова в этом файле записаны в нижнем регистре. Программа должна заменить запрещенные слова, где бы они ни встречались, даже в середине другого слова. Замена производится независимо от регистра: если файл input.txt содержит запрещенное слово exam, то слова exam, Exam, ExaM, EXAM и exAm должны быть заменены на ****.

```python
def delete_words(sentences):
    with open('input.txt','r') as file:
        f = file.read().lower()
        list_of_words = list(f.split())
        sentences = sentences.lower()
        for word in list_of_words:
            sentences=sentences.replace(word,"*"*len(word))
        print(sentences)

if __name__=="__main__":
    delete_words("Hello, world! Python IS the programming language of thE future. My EMAIL is.... PYTHON is awesome!!!!")
```
input.txt
```
hello email python the exam wor is
```

### Результат
![Сам4](https://github.com/1eaf1/SE/blob/Тема_7/pic/Сам4.png)

## Выводы
В данном коде создаётся функция, которая открывает файл со списком запрещенных слов для чтения и считывает их в нижнем регистре в переменную f. Далее создаётся список запрещенных слов при помощи метода split(), где каждое слово будет представлять собой отдельный элемент. Далее само предложение, которое поступает в функцию в качестве аргумента переводится в нижний регистр. В цикле for для каждого слова из списка слов осуществляется замена данного слова в предложении на звёздочку, умноженную на длину запрещённого слова. Далее осуществляется вывод получившегося предложения.
  
## Самостоятельная работа №5
### Считать из текстового файла числа и записать их в другой текстовый файл в отсортированном виде.

```python
def sort_numebrs(file1,file2):
    list_of_numbers = []
    with open(file1,'r') as f:
        f = f.read().split()
        index=0
        while index < len(f):
            f[index] = int(f[index])
            index+=1
        f.sort()
        list_of_numbers.extend(f)
        print(list_of_numbers)
    with open(file2,'w') as f2:
        for number in list_of_numbers:
            f2.write(str(number) + " ")


if __name__=="__main__":
    sort_numebrs('input.txt', 'output.txt')
```
### Результат
![Сам5_1](https://github.com/1eaf1/SE/blob/Тема_7/pic/Сам5_1.png)
![Сам5_2](https://github.com/1eaf1/SE/blob/Тема_7/pic/Сам5_2.png)
![Сам5_3](https://github.com/1eaf1/SE/blob/Тема_7/pic/Сам5_3.png)

## Выводы
В данном коде создаётся функция, которая принимает два файла в качестве аргументов - один файл на получение данных, другой на запись данных. Создаётся список чисел, открывается первый файл для чтения и все числа из файла заносятся в список f. Этот список сортируется по возрастанию и список list_of_numbers расширяется от списка f. Далее открывается второй файл, в который записываются все отсортированные по возрастанию числа из списка list_of_numbers. В точке входа происходит вызов функции.

## Общие выводы по теме
В результате знакомства с данной темой произошло понимание работы с чтением и записью файлов на языке Python. Были освоены основные методы для работы с файлами, а также как открывать и закрывать файлы, и к чему может привести незакрытый файл. Также была освоена работа с конструкцией with, которая автоматически закрывает файл при выходе из конструкции. Также произошло ознакомление с работой с csv-файлами и работой с файловой системой, и небольшое знакомство с обработкой исключений в Python.
